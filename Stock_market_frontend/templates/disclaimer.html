<!-- Disclaimer Modal - FIXED STYLING -->
<div class="modal fade" id="disclaimerModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content" style="background: #fff; color: #000;">
            <div class="modal-header" style="background: #FFA834; border: none;">
                <h5 class="modal-title" style="color: #000; font-weight: 700;">
                    <i class="fas fa-exclamation-triangle"></i> Important Disclaimer
                </h5>
            </div>
            <div class="modal-body">
                <h6 style="color: #000;"><strong>Investment Risk Warning</strong></h6>
                <p style="color: #333;">
                    The stock recommendations and analysis provided by this system are for <strong>informational purposes only</strong>
                    and should NOT be considered as financial advice. Stock market investments are subject to market risks.
                </p>

                <h6 style="color: #000;"><strong>No Liability</strong></h6>
                <ul style="color: #333;">
                    <li>All investments are at <strong>YOUR OWN RISK</strong></li>
                    <li>We are <strong>NOT responsible</strong> for any financial losses</li>
                    <li>Past performance does NOT guarantee future results</li>
                    <li>AI predictions are based on historical data and may be inaccurate</li>
                </ul>

                <h6 style="color: #000;"><strong>Recommendation</strong></h6>
                <p style="color: #333;">
                    Please consult with a <strong>certified financial advisor</strong> before making any investment decisions.
                    Always conduct your own research and due diligence.
                </p>

                <h6 style="color: #000;"><strong>Copyright & Terms</strong></h6>
                <p class="small" style="color: #666;">
                    Â© 2025 TradeHelper.AI. All rights reserved.<br>
                    This software is provided "as-is" without any warranties.<br>
                    Unauthorized reproduction or distribution is prohibited.
                </p>

                <!-- Highlighted Checkbox Section -->
                <div class="mt-4 p-4" style="background: linear-gradient(135deg, #fff3cd, #ffe69c); border: 2px solid #FFA834; border-radius: 12px; box-shadow: 0 4px 12px rgba(255, 168, 52, 0.2);">
                    <div class="form-check" style="display: flex; align-items: flex-start; gap: 15px;">
                        <input
                            class="form-check-input"
                            type="checkbox"
                            id="acceptDisclaimer"
                            style="
                                width: 24px;
                                height: 24px;
                                margin-top: 2px;
                                cursor: pointer;
                                border: 2px solid #FFA834;
                                flex-shrink: 0;
                            "
                        >
                        <label class="form-check-label" for="acceptDisclaimer" style="cursor: pointer; color: #000; font-size: 15px; line-height: 1.6;">
                            <strong style="color: #d63031;">I understand and accept the risks. I will not hold the system responsible for any losses.</strong>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border: none; padding: 20px;">
                <button
                    type="button"
                    class="btn btn-lg"
                    id="acceptBtn"
                    disabled
                    style="
                        width: 100%;
                        background: #6c757d;
                        color: #fff;
                        font-weight: 700;
                        border: none;
                        cursor: not-allowed;
                        transition: all 0.3s ease;
                    "
                >
                    <i class="fas fa-check-circle"></i> I Accept - Proceed
                </button>
            </div>
        </div>
    </div>
</div>

<style>
/* Custom checkbox styling */
#acceptDisclaimer:checked {
    background-color: #00D09C !important;
    border-color: #00D09C !important;
}

#acceptDisclaimer:focus {
    box-shadow: 0 0 0 0.25rem rgba(0, 208, 156, 0.25) !important;
}

/* Button enabled state */
#acceptBtn:not(:disabled) {
    background: #00D09C !important;
    cursor: pointer !important;
    box-shadow: 0 4px 12px rgba(0, 208, 156, 0.3);
}

#acceptBtn:not(:disabled):hover {
    background: #00b889 !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 208, 156, 0.4);
}
</style>

<script>
(function() {
    'use strict';

    document.addEventListener('DOMContentLoaded', function() {
        const checkbox = document.getElementById('acceptDisclaimer');
        const acceptBtn = document.getElementById('acceptBtn');
        const modalElement = document.getElementById('disclaimerModal');

        if (!checkbox || !acceptBtn || !modalElement) {
            console.error('Disclaimer elements not found!');
            return;
        }

        let modalInstance = null;

        // Show modal on first visit
        if (!localStorage.getItem('disclaimerAccepted')) {
            try {
                modalInstance = new bootstrap.Modal(modalElement, {
                    backdrop: 'static',
                    keyboard: false
                });
                modalInstance.show();
            } catch (e) {
                console.error('Bootstrap Modal error:', e);
            }
        }

        // Enable/disable button when checkbox changes
        checkbox.addEventListener('change', function() {
            acceptBtn.disabled = !this.checked;

            // Visual feedback
            if (this.checked) {
                acceptBtn.style.background = '#00D09C';
                acceptBtn.style.cursor = 'pointer';
                acceptBtn.style.boxShadow = '0 4px 12px rgba(0, 208, 156, 0.3)';
            } else {
                acceptBtn.style.background = '#6c757d';
                acceptBtn.style.cursor = 'not-allowed';
                acceptBtn.style.boxShadow = 'none';
            }
        });

        // Accept button click handler
        acceptBtn.addEventListener('click', function() {
            if (checkbox.checked) {
                localStorage.setItem('disclaimerAccepted', 'true');

                if (modalInstance) {
                    modalInstance.hide();
                } else {
                    modalInstance = bootstrap.Modal.getInstance(modalElement);
                    if (modalInstance) {
                        modalInstance.hide();
                    }
                }

                setTimeout(function() {
                    const backdrop = document.querySelector('.modal-backdrop');
                    if (backdrop) backdrop.remove();
                    document.body.classList.remove('modal-open');
                    document.body.style.overflow = '';
                    document.body.style.paddingRight = '';
                }, 300);
            }
        });
    });
})();
</script>
